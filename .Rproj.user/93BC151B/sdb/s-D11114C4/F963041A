{
    "contents" : "#### SETUP ####\nrm(list=ls(all=TRUE)) #Clear out variables from previous runs.\noptions(\"scipen\"=10, \"digits\"=5) # control the decimal places in the output\n\n# Install packages if necessary\n# install.packages(\"psych\")  \n# install.packages(\"corrgram\") \n\n## load the packages\nlibrary(psych) # multipurpose for psychologist\nlibrary(corrgram) # for graphing correlation matrices\nlibrary(Hmisc)# multipurpose\nlibrary(sem) # structural equation modeling\nlibrary(reshape2) # data transformation\nlibrary(ggplot2) # general graphing\nlibrary(plotrix) # ploting matrix graphs\n\n# Please consult the website of James Steiger (www.statpower.net) for all materials pertaining to this demonstration. ( See Psychology 312). For this particular demonstration, please follow his handout on \"Advanced EFA\" ( http://statpower.net/Content/312/Handout/Advanced%20Exploratory%20Factor%20Analysis%20in%20R.pdf ) and the lecture on \"Practical EFA\" ( http://statpower.net/Content/319SEM/Lecture%20Notes/PracticalEFA.pdf )\n\n## load some custom functions\n# Useful function for multivariate stats\nsource(\"http://statpower.net/Content/312/R%20Stuff/Steiger%20R%20Library%20Functions.txt\")\n# Functions to assist you in FA and SEM\nsource(\"http://statpower.net/Content/312/R%20Stuff/AdvancedFactorFunctions.txt\")\n# Functions by Dirk Enzmann to aid promax rotation\nsource(\"http://statpower.net/Content/312/R%20Stuff/fa.promax.R\")\n# Load Athletic data directly from James Stieger's website\n\n#### Data prep ####\n\ndata() # lists all availible datasets\ndata(Harman74.cor) # calling Harman74.cor into existence inside RStudio session\nR <- as.matrix(Harman74.cor[[1]]) # segregating the correlation matrix\ncolnames(R) # lists the names of the columns\nrow.names(R) # lists the names of the rows\nR # print the correlation matrix\n\n# for more on the dataset see  Harman, H. H. (1976) Modern Factor Analysis, Third Edition Revised, University of Chicago Press, Table 7.4. ( http://books.google.ca/books?id=e-vMN68C3M4C&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=twopage&q&f=false , page 125)\n\n#### Data Explorations ####\n\ncorrgram(R) # get the basic correlogram\ncorrgram(R,upper.panel=panel.conf,lower.panel=panel.pie) # customize panels\ncorrgram(R,upper.panel=panel.conf,lower.panel=panel.pie, order = T) # sort by PCA\n\n#### FA of 24 Psychological Variables ####\n\neigen(R)$values # examine eigenvalues directly\nScree.Plot(R, main=\"Scree plot of 24 Psychological variables (n=145)\") # plot the eigen values\nFA.Stats(R, n.factors=1:10, n.obs=145, main=\"RMSEA plot of 24 Psych Variables (n=145)\") # Request Chi-Square and RMSEA stats\nout <- MLFA(Correlation.Matrix = R, n.factors=4, n.obs=145) # conduct MLFA and collect all rotations in a single object\nLoadings(out, cutoff=.3, num.digits=2) # print and examine factor loadings\n\n#### Note on RMSEA ####\n#### NOTE : The RMSEA index can be thought of roughly as a root mean square standardized residual. # values above .10 indicate an inadequate fit, \n#### values below .05 indicate a very good fit.\n#### Point estimates below .01 indicate an outstanding fit, and are seldom obtained.\n#### CONFIDENCE INTERVALS must be interpreted, not the point estimates!!!\n#### Look for the point estimage whose confidence interval includes zero (indicating a failure to reject the null hypothesis of perfect fit, i.e., RMSEA = 0, at the 0.05 level).\n\n\n#### Note on MLFA ####\n#### MLFA() function comes with the following rotation options:\n#### Uncorrelated Factors: Unrotated - Varimax - Quartimin - Bifactor  \n####   Correlated Factors:           - Promax              - BifactorOblique \n\nout$Unrotated # request only Unrotated\nout$Varimax # request only Varimax roation\nout$Promax # request only Promax\n\n\n#### FA of Thurstone data ####\n\ndata(Thurstone) # call a dataset \"Thurstone\" into existence inside RStudio session\nR.2 <- as.matrix(Thurstone) # save it as a correlation matrix called R.2\nR.2 # print R.2\n\n# explore the correlations\n\ncorrgram(R,upper.panel=panel.conf,lower.panel=panel.pie, order = T) # ordered correlogram\ncorrgram(R,upper.panel=panel.conf,lower.panel=panel.pie, order = F) # unordered correlogram\n\n\nScree.Plot(R.2, main=\"Scree plot of Thurstone data (n=213)\") # plot the eigen values\nFA.Stats(R.2, n.factors=1:4, n.obs=213, main=\"RMSEA plot of 24 Psych Variables (n=145)\") # Find ML solutions and rotations\nout.2 <- MLFA(Correlation.Matrix = R.2, n.factors=3, n.obs=213) # Conduct MLFA\nLoadings(out.2, cutoff=.3, num.digits=2) # print and examine factor loadings\n\n\n\n\n",
    "created" : 1426529235614.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3142004836",
    "id" : "F963041A",
    "lastKnownWriteTime" : 1425579552,
    "path" : "~/GitHub/psy533/Cases/Advanced EFA in R/Advanced EFA.R",
    "project_path" : "Cases/Advanced EFA in R/Advanced EFA.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}