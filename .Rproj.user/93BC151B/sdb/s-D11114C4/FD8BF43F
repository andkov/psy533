{
    "contents" : "rm(list=ls(all=TRUE)) #Clear out variables from previous runs.\noptions(\"scipen\"=10, \"digits\"=5) \n######### Set Up Working Directory!!\n#  setwd(dir = \"./ \")\n\nlibrary(Hmisc) # matrix and utility functions\nlibrary(corrgram) # graphing correlation matrices\nlibrary(sem) # structural equation modeling\n\n\n#### Resources ####\n\n## Please consult the website of James Steiger ( www.statpower.net ) for all materials pertaining to this demonstration. \n\n## For the demonstraction of factor analysis with 'sem' package see Steiger's tutorial entitled \"CFA with R\" ( http://statpower.net/Content/312/Handout/Confirmatory%20Factor%20Analysis%20with%20R.pdf )\n\n## For the demonstration of FA with custom functions see Steiger's tutorial entitled \"Advanced CFA with R\" (   http://statpower.net/Content/312/Handout/Advanced%20Confirmatory%20Factor%20Analysis%20in%20R.pdf )\n\n## For detailed discussion of 'sem' package see John Fox paper \"Structural Equation Modeling in R with the sem Package\" ( http://socserv.mcmaster.ca/jfox/Books/Companion/appendix/Appendix-SEMs.pdf )\n\n## For 'sem' package documentation see  http://cran.r-project.org/web/packages/sem/sem.pdf  or  http://www.rdocumentation.org/packages/sem \n\n## For \"Exploratory-Confirmatory\" Approach see Karl Joreskog 1978 paper ( http://www.researchgate.net/profile/Karl_Joereskog/publication/24062332_Structural_analysis_of_covariance_and_correlation_matrices/links/0046352b8b078d34d6000000.pdf )\n\n\n\n#### Custom functions ####\nsource(\"http://statpower.net/Content/312/R%20Stuff/Steiger%20R%20Library%20Functions.txt\")\n# Functions to assist you in FA and SEM\nsource(\"http://statpower.net/Content/312/R%20Stuff/AdvancedFactorFunctions.txt\")\n# Functions by Dirk Enzmann to aid promax rotation\nsource(\"http://statpower.net/Content/312/R%20Stuff/fa.promax.R\")\n\n#### Data and Option prep ####\n\n# Load Athletic data directly from James Stieger's website\nAthleticsData <- read.csv(\"http://statpower.net/Content/312/Homework/AthleticsData.csv\")\n# attach(AthleticsData)\n\n\n#          R            Correlation/Covariance matrix - R  \n#      F      F'        Grahm-Factors                 - F\n#   VD1/2   D1/2V'      Principle Component patterns  - \n#   V     D     V'      Earhart-Young decomposition   - V, D   \n#      Rv = cv          Eigenvalues and Eigenvectors  \n\nR<-cor(AthleticsData) # correlation matrix R of variables in AthleticsData\nR\nround(cor(AthleticsData),2)\ncorrgram(x=R,order=TRUE,\n         main=\"Correlogram of Athletic Data\",\n         upper.panel=panel.pie,\n         lower.panel=panel.shade)\n\n## selection of availible fit/information indices\n# opt <- options(fit.indices = c(\"GFI\", \"AGFI\", \"RMSEA\", \"NFI\", \"NNFI\",\"CFI\", \"RNI\", \"IFI\", \"SRMR\", \"AIC\", \"AICc\", \"BIC\", \"CAIC\"))\nopt <- options(fit.indices= c(\"GFI\",\"RMSEA\"))\n\n\n#### 1. Pure Confirmatory Analsyis ####\nFNames <- c(\"Hand-Eye\",\"Endurance\",\"Strength\")\n\n# orThogonal = factors are not correlated (default)\npureCFA.fit.T <- QuickCFA(R=R,n.factors=3, n.obs = 1000, factor.names = FNames )\nsummary(pureCFA.fit.T, opt)\nGetPattern(pureCFA.fit.T)\nGetPrettyPattern(pureCFA.fit.T)\nRMSEA(pureCFA.fit.T)\n\n# obliQue = factors are allowed to correlate\npureCFA.fit.Q <- QuickCFA(R=R,n.factors=3, n.obs = 1000, factor.names = FNames, factor.correlations = TRUE)\nsummary(pureCFA.fit.Q, opt)\nGetPattern(pureCFA.fit.Q)\nGetPrettyPattern(pureCFA.fit.Q)\nRMSEA(pureCFA.fit.Q)\n\n# Check and use modification indices\nmodIndices(pureCFA.fit.T) # print all, not all are legal though\nCheckMod(pureCFA.fit.T) # print the largest legal modification index\nCheckMod(pureCFA.fit.T, loadings.only=FALSE) # prinet largest modIndixes, regardless of legality\n\nfit.2 <- UseMod(pureCFA.fit.T) # update  the fit object with the largest (legal) modIndex\nRMSEA(fit.2)\nGetPrettyPattern(fit.2)\n\n\nCheckMod(fit.2)\nfit.3 <- UseMod(fit.2)\nRMSEA(fit.3)\nGetPrettyPattern(fit.3)\nsummary(fit.3)[c(1:7)]\n\n#### 2. CFA from EFA ####\nfromEFA.fit <- QuickEFAtoCFA(R=R, n.factors = 3, n.obs = 1000, rotation = \"Varimax\")\nsummary(fromEFA.fit)\nGetPrettyPattern(fromEFA.fit)\n\n#### 3. \"Confirm and Update\" Approach \n\n\n#### 4. The \"Exploratory-Confirmatory\" Approach\n\n\n",
    "created" : 1426526669136.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "668007426",
    "id" : "FD8BF43F",
    "lastKnownWriteTime" : 1426529416,
    "path" : "~/GitHub/psy533/Cases/Advanced CFA in R/Class Demo/Advanced CFA with R.R",
    "project_path" : "Cases/Advanced CFA in R/Class Demo/Advanced CFA with R.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}